# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CTA ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

**–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ CTA.**  
–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (`backlog.md`, `logic.md` –∏ —Ç.–¥.) **—Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ** –∏ –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É.

---

## 1. –û–±—â–∞—è –º–æ–¥–µ–ª—å (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ –¥–æ–≥–æ–≤–æ—Ä)

**–í–∞—Ä–∏–∞–Ω—Ç 4 ‚Äî –≥–∏–±—Ä–∏–¥ ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π.**

### –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **GPT** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞  
- **–§—Ä–æ–Ω—Ç** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä, –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞—Ä–±–∏—Ç—Ä

> –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–º.  
> –í—Å—è –¥–∞–ª—å–Ω–µ–π—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞.

---

## 2. Structured Output ‚Äî –ø—Ä–∏–Ω—è—Ç–∞—è —Å—Ö–µ–º–∞

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Structured Output (JSON)** –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É LLM (–≤ Flowise) –∏ —Ñ—Ä–æ–Ω—Ç–æ–º.  
–°—Ö–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices conversational AI **2025‚Äì2026**.

**P0 vs P1+:** –í P0 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (—Å–º. [`prompt.md`](prompt.md) ¬ß14): `answer`, `ui.ctaIntent`, `meta.stage`, `meta.confidence`, `flags.emotional`. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–ª—è –Ω–∏–∂–µ (`showCTA`, `ctaText`, `ctaTiming`, `meta.intent`, `shouldHandoff`, `flags.isOffTopic`, `isFlood`, `needsEmpathy`) ‚Äî P1+.

### –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ (P1+ / –ø–æ–ª–Ω–∞—è)

```json
{
  "answer": "–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é",

  "ui": {
    "showCTA": true,
    "ctaIntent": "booking",
    "ctaText": "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é",
    "ctaTiming": "after_message"
  },

  "meta": {
    "stage": "ready",
    "intent": "visit",
    "confidence": 0.82,
    "shouldHandoff": false
  },

  "flags": {
    "isOffTopic": false,
    "isFlood": false,
    "needsEmpathy": true,
    "emotional": false
  }
}
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ–ª—è–º

- **answer** ‚Äî —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

- **ui.showCTA** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è GPT –ø–æ–∫–∞–∑–∞—Ç—å CTA (boolean)

- **ui.ctaIntent** ‚Äî —Ç–∏–ø –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞:  
  `soft_help | info_step | contact | booking | handoff`
  
  - `soft_help` ‚Äî –º—è–≥–∫–∏–π —à–∞–≥ (–ø–æ–º–æ—á—å —Å–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ –≤–∞–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å)
  - `info_step` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —à–∞–≥ (–ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è / —ç—Ç–∞–ø—ã)
  - `contact` ‚Äî –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
  - `booking` ‚Äî —è–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
  - `handoff` ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

- **ui.ctaText** ‚Äî —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Ñ—Ä–æ–Ω—Ç–æ–º)

- **ui.ctaTiming** ‚Äî –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å: `after_message | inline | delayed`

- **meta.stage** ‚Äî —Å—Ç–∞–¥–∏—è –¥–∏–∞–ª–æ–≥–∞:  
  `discovery | interest | ready | objection`

- **meta.intent** ‚Äî –∫–ª–∞—Å—Å –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ—Ä–∞–∑—ã)

- **meta.confidence** ‚Äî **—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏** (stage / intent / flags)  
  ‚ö†Ô∏è **–ù–ï —Ä–∞–≤–Ω–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
  –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ç–∞–¥–∏–µ–π –¥–∏–∞–ª–æ–≥–∞, –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

- **meta.shouldHandoff** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

- **flags** ‚Äî —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞, –∞ –Ω–µ –∫–æ–º–∞–Ω–¥—ã
  - `isOffTopic` ‚Äî –Ω–µ—Ü–µ–ª–µ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - `isFlood` ‚Äî —Ñ–ª—É–¥/—Å–ø–∞–º
  - `needsEmpathy` ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è —ç–º–ø–∞—Ç–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç
  - `emotional` ‚Äî —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–≤–æ–≥–∞, –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ)

---

## 3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: CTA ‚â† —Ñ–æ—Ä–º–∞

**CTA ‚Äî —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞, –∞ –Ω–µ –∑–∞–ø—É—Å–∫ —Ñ–æ—Ä–º—ã.**

### –†–∞–∑–ª–∏—á–∏–µ

- **CTA** ‚Äî –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–∫–Ω–æ–ø–∫–∞, —Ç–µ–∫—Å—Ç-—Å—Å—ã–ª–∫–∞, –ø–æ–¥—Å–∫–∞–∑–∫–∞)
- **–§–æ—Ä–º–∞** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π `dialogState` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `collecting_contact`)

### –í–∞–∂–Ω–æ

- –ù–µ –≤—Å–µ CTA –≤–µ–¥—É—Ç –∫ —Ñ–æ—Ä–º–µ
- –§–æ—Ä–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ä–µ—à–µ–Ω–∏–∏ —Ñ—Ä–æ–Ω—Ç–∞
- CTA —Ç–∏–ø–∞ `soft_help` –∏–ª–∏ `info_step` –º–æ–≥—É—Ç –Ω–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—ã –≤–æ–æ–±—â–µ

### –ü—Ä–∏–º–µ—Ä—ã

- `ctaIntent: "soft_help"` ‚Üí –∫–Ω–æ–ø–∫–∞ "–ß—Ç–æ –µ—â—ë –≤–∞–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å?" ‚Üí **–±–µ–∑ —Ñ–æ—Ä–º—ã**
- `ctaIntent: "info_step"` ‚Üí –∫–Ω–æ–ø–∫–∞ "–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è?" ‚Üí **–±–µ–∑ —Ñ–æ—Ä–º—ã**
- `ctaIntent: "contact"` ‚Üí –∫–Ω–æ–ø–∫–∞ "–û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã" ‚Üí **–º–æ–∂–µ—Ç** –≤–µ—Å—Ç–∏ –∫ —Å–±–æ—Ä—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–µ –∏–ª–∏ –∫ —Ñ–æ—Ä–º–µ (P1+)
- `ctaIntent: "booking"` ‚Üí –∫–Ω–æ–ø–∫–∞ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" ‚Üí **–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–±–æ—Ä—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** (–∏–º—è ‚Üí —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –¥–∏–∞–ª–æ–≥–µ); —Ñ–æ—Ä–º–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ ‚Äî –æ–¥–∏–Ω –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö UI, –≤ P0 –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `ctaIntent: "handoff"` ‚Üí –∫–Ω–æ–ø–∫–∞ "–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º" ‚Üí **–º–æ–∂–µ—Ç** –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã

### –§–æ—Ä–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è CTA

CTA –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ö:

- **–î–∏–∞–ª–æ–≥–æ–≤—ã–π CTA** ‚Äî —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –≤ —Ç–µ–∫—Å—Ç–µ –æ—Ç–≤–µ—Ç–∞ (`answer`), –º—è–≥–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –∏–ª–∏ —É—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π CTA** ‚Äî –∫–Ω–æ–ø–∫–∞ –∏–ª–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —á–µ—Ä–µ–∑ `renderCTA()`

**–ü—Ä–∞–≤–∏–ª–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

–ü—Ä–∏ `flags.emotional === true` –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤—ã–µ CTA** –≤ —Ç–µ–∫—Å—Ç–µ –æ—Ç–≤–µ—Ç–∞. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–µ CTA (–∫–Ω–æ–ø–∫–∏) –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.

–≠—Ç–æ –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç CTA –∫–∞–∫ —Ç–∞–∫–æ–≤–æ–π, –∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –µ–≥–æ —Ñ–æ—Ä–º—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –¥–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.

---

## 4. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ ‚Äî –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**–§—Ä–æ–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ GPT**, –¥–∞–∂–µ –µ—Å–ª–∏ –º–æ–¥–µ–ª—å —É–≤–µ—Ä–µ–Ω–∞ –Ω–∞ 99%.

### 4.1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (CTA —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏)

**–°–∏—Ç—É–∞—Ü–∏—è:**  
GPT –≤–µ—Ä–Ω—É–ª `showCTA = true`, –Ω–æ CTA —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.

**–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**

- CTA **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É**
- —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è GPT **–æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è** (–Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é)
- `intent`, `stage` –∏ `ctaIntent` **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–∑–∂–µ

```text
–µ—Å–ª–∏ ctaShownCount >= MAX
‚Üí –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å CTA —Å–µ–π—á–∞—Å
‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å recommendedCTA (intent, stage, ctaIntent)
‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π CTA –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –¥–∏–∞–ª–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ü–µ–ª–µ–≤—ã–º –æ–±—Ä–∞–∑–æ–º
```

**–ü–æ—á–µ–º—É:**

- –ø–æ–≤—Ç–æ—Ä CTA —Å–Ω–∏–∂–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ
- –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ –¥–∞–≤–ª–µ–Ω–∏–µ
- –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Ç–µ–º–∞—Ç–∏–∫–∏
- **CTA ‚Äî —ç—Ç–æ –Ω–µ "—Å–µ–π—á–∞—Å –∏–ª–∏ –Ω–∏–∫–æ–≥–¥–∞"**, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª –ø–æ–∑–∂–µ

---

### 4.2. –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ CTA

**–ü—Ä–∏–Ω—Ü–∏–ø:** CTA –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –±–∏–Ω–∞—Ä–Ω—ã–º "–ø–æ–∫–∞–∑–∞—Ç—å –∏–ª–∏ –Ω–µ –ø–æ–∫–∞–∑–∞—Ç—å".

–ï—Å–ª–∏ GPT —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç CTA, –Ω–æ —Ñ—Ä–æ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –ø–æ–∫–∞–∑–∞—Ç—å (–ª–∏–º–∏—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞), —Ñ—Ä–æ–Ω—Ç –¥–æ–ª–∂–µ–Ω:

1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:**
   - `pendingCTA.intent` = `meta.intent`
   - `pendingCTA.stage` = `meta.stage`
   - `pendingCTA.ctaIntent` = `ui.ctaIntent`
   - `pendingCTA.confidence` = `meta.confidence`
   - `pendingCTA.timestamp` = —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ:**
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ª–æ–≥
   - –ï—Å–ª–∏ `currentStage` –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é
   - –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

3. **–û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π CTA:**
   - –ü—Ä–∏ –ø–æ–∫–∞–∑–µ CTA
   - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–∞
   - –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```text
GPT —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç: ctaIntent = "booking", confidence = 0.85
–§—Ä–æ–Ω—Ç: ctaShownCount >= MAX ‚Üí –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
–î–µ–π—Å—Ç–≤–∏–µ: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ pendingCTA
–ß–µ—Ä–µ–∑ 3 —Å–æ–æ–±—â–µ–Ω–∏—è: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ —Ü–µ–Ω—ã
–§—Ä–æ–Ω—Ç: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç pendingCTA ‚Üí stage = "ready", confidence = 0.85
–†–µ—à–µ–Ω–∏–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π CTA
```

---

### 4.3. Fallback: GPT –≤–µ—Ä–Ω—É–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON

**–ó–∞–ø—Ä–µ—â–µ–Ω–æ:**

- –ø—Ä–æ—Å–∏—Ç—å –º–æ–¥–µ–ª—å –ø–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç
- –¥–µ–ª–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∏–¥–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ GPT

**–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π fallback:**

```text
–µ—Å–ª–∏ JSON –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª—Å—è
‚Üí –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ—Ç–≤–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å baseline-–ª–æ–≥–∏–∫—É —Ñ—Ä–æ–Ω—Ç–∞
‚Üí stage = previousStage
‚Üí CTA = false
```

**–ü—Ä–∏—á–∏–Ω—ã:**

- –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ UI-–∑–∞–≤–∏—Å–∞–Ω–∏–π

---

### 4.4. Confidence threshold (—É—Ä–æ–≤–Ω–∏ –¥–æ–≤–µ—Ä–∏—è)

**–í–∞–∂–Ω–æ:** `confidence` ‚Äî —ç—Ç–æ **—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏** (stage / intent / flags),  
**–ù–ï –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**

–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:
- —Å—Ç–∞–¥–∏–µ–π –¥–∏–∞–ª–æ–≥–∞ (`meta.stage`)
- –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–æ–ø—Ä–æ—Å—ã –æ —Ü–µ–Ω–µ, —Å—Ä–æ–∫–∞—Ö, –≤—Ä–∞—á–µ)
- –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

–í –±—É–¥—É—â–µ–º –≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ `confidence` / `readiness`, –Ω–æ —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–æ **–ù–ï –ø—É—Ç–∞—Ç—å** —ç—Ç–∏ –ø–æ–Ω—è—Ç–∏—è –≤ –ª–æ–≥–∏–∫–µ.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å**, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–ª—è enterprise AI.

#### üü¢ –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence ‚â• 0.7)

- —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ GPT —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
- **–Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞**

#### üü° –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0.4 ‚â§ confidence < 0.7)

- —Å–∏–≥–Ω–∞–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–º
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ—Ä–æ–Ω—Ç–∞
- CTA –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ª–æ–∂–µ–Ω

#### üî¥ –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence < 0.4)

- —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ GPT –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–∏ `showCTA = false`

---

## 4. –°–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞

–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ**.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```js
const widgetState = {
  messageCount: 0,
  ctaShownCount: 0,
  lastCTATimestamp: null,

  currentStage: 'discovery', // —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å meta.stage

  dialogState: 'normal', // normal | collecting_contact | blocked

  floodAttempts: 0,

  // –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π CTA
  pendingCTA: {
    intent: null,        // meta.intent –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    stage: null,         // meta.stage –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    ctaIntent: null,     // ui.ctaIntent –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    confidence: null,     // meta.confidence –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    timestamp: null       // –∫–æ–≥–¥–∞ –±—ã–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
  }
}
```

### –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–ª–∏—á–∏–µ

- **currentStage** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏ –¥–∏–∞–ª–æ–≥–∞ (–∏–∑ `meta.stage`)  
- **dialogState** ‚Äî —Ä–µ–∂–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (`normal | collecting_contact | blocked`)

–≠—Ç–æ **–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ª–æ—è**, –∏ –æ–Ω–∏ –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è.

### –õ–æ–≥–∏–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ CTA

- `pendingCTA` –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ GPT —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç CTA, –Ω–æ —Ñ—Ä–æ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –ø–æ–∫–∞–∑–∞—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–∑–∂–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –û—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–∫–∞–∑–µ CTA –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã

---

## 5. –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞

```
Flowise ‚Üí JSON
   ‚Üì
parseFlowiseResponse()
   ‚Üì
validateJSON() / fallback
   ‚Üì
applyBusinessRules()
   ‚Üì
shouldShowCTA() / savePendingCTA()
   ‚Üì
renderAnswer()
   ‚Üì
renderCTA() (–∏–ª–∏ –Ω–µ—Ç) / checkPendingCTA()
```

### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–≥–æ–≤

1. **parseFlowiseResponse()** ‚Äî –ø–∞—Ä—Å–∏—Ç JSON, –∏–∑–≤–ª–µ–∫–∞–µ—Ç `answer`, `ui`, `meta`, `flags`

2. **validateJSON()** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí fallback –Ω–∞ baseline-–ª–æ–≥–∏–∫—É

3. **applyBusinessRules()** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - `dialogState` (–Ω–µ `collecting_contact`, –Ω–µ `blocked`)
   - `ctaShownCount` (–ª–∏–º–∏—Ç—ã –ø–æ–∫–∞–∑–æ–≤)
   - `floodAttempts` (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
   - `meta.confidence` (–ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
   - `flags.emotional` (–µ—Å–ª–∏ `true` ‚Üí —Ç–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤—ã–π CTA, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å)

4. **shouldShowCTA()** ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
   - –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã –∏ `flags.emotional === false` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π CTA
   - –ï—Å–ª–∏ `flags.emotional === true` ‚Üí CTA —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—Å—Ç–µ (`answer`), –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
   - –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã ‚Üí –≤—ã–∑—ã–≤–∞—Ç—å `savePendingCTA()`

5. **savePendingCTA()** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é GPT –≤ `widgetState.pendingCTA`

6. **checkPendingCTA()** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π CTA:
   - –ò–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Å—Ç–∞–¥–∏—è –¥–∏–∞–ª–æ–≥–∞
   - –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ª–∏ —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ª–æ–≥
   - –ü—Ä–æ—à–ª–æ –ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏

7. **renderAnswer()** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ (–≤–∫–ª—é—á–∞—è –¥–∏–∞–ª–æ–≥–æ–≤—ã–π CTA, –µ—Å–ª–∏ `flags.emotional === true`)

8. **renderCTA()** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π CTA (–∫–Ω–æ–ø–∫—É) —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
   - `shouldShowCTA()` –≤–µ—Ä–Ω—É–ª `true`
   - `flags.emotional === false`

> **–ù–∏ –æ–¥–∏–Ω —à–∞–≥ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º —Ä–µ—à–µ–Ω–∏—è GPT.**  
> –§—Ä–æ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —É—Å–ª–æ–≤–∏—è –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

---

## 6. –¢–∏–ø—ã CTA –∏ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### soft_help
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú—è–≥–∫–∏–π —à–∞–≥, –ø–æ–º–æ—â—å —Å–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è  
**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** "–ß—Ç–æ –µ—â—ë –≤–∞–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å?", "–û —á—ë–º —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ?"  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ù–µ –≤–µ–¥—ë—Ç –∫ —Ñ–æ—Ä–º–µ, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏–π

### info_step
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —à–∞–≥, –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å  
**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** "–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è?", "–ö–∞–∫–∏–µ —ç—Ç–∞–ø—ã –ª–µ—á–µ–Ω–∏—è?"  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ù–µ –≤–µ–¥—ë—Ç –∫ —Ñ–æ—Ä–º–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–∏–∞–ª–æ–≥

### contact
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç  
**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** "–û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã", "–°–≤—è–∑–∞—Ç—å—Å—è —Å –≤–∞–º–∏"  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ú–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ –∫ —Å–±–æ—Ä—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–µ –∏–ª–∏ (P1+) –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

### booking
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –Ø–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é  
**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é", "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –≤—Ä–∞—á—É"  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–±–æ—Ä—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–∏–º—è ‚Üí —Ç–µ–ª–µ—Ñ–æ–Ω). –í P0 —Å–±–æ—Ä –∏–¥—ë—Ç –≤ –¥–∏–∞–ª–æ–≥–µ; —Ñ–æ—Ä–º–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –§–æ—Ä–º–∞ (`dialogState = 'collecting_contact'`) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π UI –≤ P1+.

### handoff
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞—á–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É  
**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞:** "–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º", "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º"  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ú–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

---

## 7. –ü–æ—á–µ–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

- –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ –∫–ª–∏–Ω–∏–∫–∏
- –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CTA
- —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –Ω–æ–≤—ã–º —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¥–æ–ø—É—Å–∫–∞–µ—Ç —Ä–æ—Å—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Ç–æ–∫–µ–Ω—ã –±–µ–∑ —Ä–∏—Å–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:

- medical intake bots
- legal intake systems
- enterprise sales assistants

---

## 8. –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è (–ø—Ä–∞–≤–∏–ª–æ –ø—Ä–æ–µ–∫—Ç–∞)

> –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Structured Output –æ—Ç GPT**  
> –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞–¥–∏–∏ –¥–∏–∞–ª–æ–≥–∞, –∏–Ω—Ç–µ–Ω—Ç–∞ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∏—Ç—É–∞—Ü–∏–∏,  
> **–Ω–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ CTA, —Ñ–æ—Ä–º–∞—Ö –∏ –∫–Ω–æ–ø–∫–∞—Ö  
> –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞ —Ñ—Ä–æ–Ω—Ç–æ–º**,  
> —Å —É—á—ë—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π, –ª–∏–º–∏—Ç–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **GPT ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**  
   GPT –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Ç–∏–ø CTA —á–µ—Ä–µ–∑ `ctaIntent`.

2. **–§—Ä–æ–Ω—Ç ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä, –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞—Ä–±–∏—Ç—Ä**  
   –§—Ä–æ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —É—Å–ª–æ–≤–∏—è –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.3. **CTA ‚â† —Ñ–æ—Ä–º–∞**  
   CTA ‚Äî —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —à–∞–≥–∞, —Ñ–æ—Ä–º–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π `dialogState`.4. **CTA –Ω–µ –±–∏–Ω–∞—Ä–µ–Ω**  
   –ï—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã CTA –ø–æ `ctaIntent`, –Ω–µ –≤—Å–µ –≤–µ–¥—É—Ç –∫ —Ñ–æ—Ä–º–µ.5. **–û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**  
   –ï—Å–ª–∏ CTA –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∫–∞–∑–∞–Ω —Å–µ–π—á–∞—Å, –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø–æ–∑–∂–µ.6. **Confidence ‚â† –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**  
   `confidence` ‚Äî —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.